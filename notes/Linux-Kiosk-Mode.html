<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta name="theme-color" content="#2F3136">
    <meta content="üìñ My Notebook" property="og:site_name" />
    <meta
        content="Welcome to my digital notebook!"
        property="og:description">
      <meta content="https://publish.runarsf.dev/about/" property="article:author">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap"
        rel="stylesheet"><meta content="Linux kiosk mode" property="og:title">
      <meta content="article" property="og:type">
      <meta content="https://publish.runarsf.dev/notes/Linux-Kiosk-Mode" property="og:url"><title>üìñ My Notebook</title>
      <link rel="canonical" href="https://publish.runarsf.dev/notes/Linux-Kiosk-Mode" />
      <link rel="apple-touch-icon" href="/assets/img/profile.png">
      <link rel="icon" href="/assets/img/favicon.png" type="image/png" sizes="16x16" />
      <link href="/assets/css/style.css" rel="stylesheet" media="all" class="default" />
      <link href="/assets/css/main.css" rel="stylesheet" media="all" class="default" />
      <link href="/assets/css/Util.css" rel="stylesheet" media="all" class="default" />
      <link href="/assets/css/vendor/Katex.css" rel="stylesheet" media="all" class="default" />
      <!--[if IE]>
        <link href="/assets/css/ie-target.css" rel="stylesheet" type="text/css"/>
      <![endif]-->
      <!--<link href="/assets/css/prism.css" rel="stylesheet" />-->
      <link rel="alternate" type="application/rss+xml" href="https://publish.runarsf.dev/feed.xml">
      <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['$','$'], ['\\(', '\\)'] ],
            displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
            processEscapes: true
          },
          "HTML-CSS": {
            linebreaks: { automatic: true, width: "container" }
          }
        });
      </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    </head>
    <body><nav class="navbar is-transparent" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
          <a class="navbar-item" href="../index.html">
            <!-- <svg width="32" height="32" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M36.9477 13.7742C38.3043 11.4086 41.6957 11.4086 43.0523 13.7742L70.5226 61.6774C71.8791 64.043 70.1834 67 67.4703 67H12.5297C9.81658 67 8.12089 64.043 9.47744 61.6774L36.9477 13.7742ZM40 16.9677L13.7506 62.7419H66.2494L40 16.9677Z" fill="var(--text-main)"/>
        </svg> -->
            <h4>üìñ My Notebook</h4>
          </a>
          <div class="navbar-item navbar-dark-mode__mobile is-hidden-tablet" onclick="modeSwitcher()">
            <div class="buttons">
              <a class="button is-text">
                <span class="icon is-small">
                  <img src="../assets/img/sun.svg" id="theme-toggle-img--mobile">
                </span>
              </a>
            </div>
          </div>
          <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>
        <div id="navbarBasicExample" class="navbar-menu">
          <div class="navbar-start">
            <a href="/about" title="" class="navbar-item">
              About
            </a>
            <a href="/notes" title="My notes" class="navbar-item">
              Notes
            </a>
            <a href="/tags" title="" class="navbar-item">
              Tags
            </a>
            <!-- <a href="/about" class="navbar-item">
          About
        </a>
        <a href="/notes" class="navbar-item">
          Notes
        </a>
        <a href="/tags" class="navbar-item">
          Tags
        </a>
        <a href="/feed.xml" class="navbar-item">
          RSS
        </a> -->
          </div>
          <div class="navbar-end is-hidden-mobile" onclick="modeSwitcher()" >
            <div class="navbar-item">
              <div class="buttons">
                <a class="button is-text">
                  <span class="icon is-small">
                    <img src="../assets/img/sun.svg" id="theme-toggle-img">
                  </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <script src="/assets/js/Hamburger.js"></script>
      <section class="section">
        <div class="columns is-centered">
          <!--- CASE 1 : Homepage--><!---CASE 2 : Notes & Blog Page-->
          <div class="column is-three-fifths">
            <main>
              <div class="note-page-section">
                <a href="/tags/#linux" class="tag noselect">#linux</a>
                <div class="buttons for-back-home"><a class="button is-text button__page-back" onclick="window.history.back();"><span class="icon is-small">
                      <svg width="12" height="20" viewBox="0 0 12 20" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M11.0309 0.468998C11.1007 0.538667 11.1561 0.62143 11.1939 0.712548C11.2318 0.803665 11.2512 0.901347 11.2512 0.999998C11.2512 1.09865 11.2318 1.19633 11.1939 1.28745C11.1561 1.37857 11.1007 1.46133 11.0309 1.531L2.56038 10L11.0309 18.469C11.1717 18.6098 11.2508 18.8008 11.2508 19C11.2508 19.1992 11.1717 19.3902 11.0309 19.531C10.89 19.6718 10.699 19.7509 10.4999 19.7509C10.3007 19.7509 10.1097 19.6718 9.96887 19.531L0.968875 10.531C0.899031 10.4613 0.843616 10.3786 0.805806 10.2874C0.767997 10.1963 0.748535 10.0986 0.748535 10C0.748535 9.90135 0.767997 9.80367 0.805806 9.71255C0.843616 9.62143 0.899031 9.53867 0.968875 9.469L9.96887 0.468998C10.0385 0.399153 10.1213 0.343739 10.2124 0.305929C10.3035 0.26812 10.4012 0.248657 10.4999 0.248657C10.5985 0.248657 10.6962 0.26812 10.7873 0.305929C10.8784 0.343739 10.9612 0.399153 11.0309 0.468998Z"
                                        fill="var(--text-main)" />
                      </svg>
                    </span>
                  </a>
                </div>
                <h1>Linux kiosk mode</h1>
                <!-- Parse internal links, external links, transclusions etc and manipuate the content to reflect it accordingly -->
                <div class="content"><iframe src="https://www.youtube.com/embed/hf96SQqOoRs" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" width="560" height="315">
                  </iframe>
                  <p>Denne prosedyren er en skriftlig og mer utbredt versjon av denne <a href="https://youtu.be/hf96SQqOoRs">YouTube Videoen</a>, og baserer seg p√• Ubuntu 20.04 LTS med Firefox/Chromium som app for kiosk-mode, men b√∏r la seg adaptere til andre system og applikasjoner.
                    I praksis kj√∏rer dette bare en instans av nettleseren i headless/kiosk-modus over desktop environmentet (Gnome) og fjerner s√• mange distraksjoner som mulig.
                    VNC-serveren kj√∏rer p√• port 5905 og kan kobles til med IP:PORT, f.eks. med Remmina.</p>
                  <ul>
                    <li>Installer en LTS versjon av Ubuntu (testet p√• 20.04) i minimal mode, ikke installer ekstra software eller oppdateringer under oppsett. I denne prosedyren er brukernavnet ‚Äúkiosk‚Äù brukt.</li>
                    <li>Oppdater pakkeinformasjon: <code class="highlighter-rouge">sudo apt-get update</code>¬†</li>
                    <li>Installer n√∏dvendige pakker: <code class="highlighter-rouge">sudo apt-get install -y vim openssh-server slick-greeter x11vnc</code>
                      Bytt til <em>lightdm</em> om du f√•r sp√∏rsm√•l om det.</li>
                    <li>Fjern distraksjoner fra system Settings
                      <ul>
                        <li>Notifications ‚Üí <strong>Do Not Disturb</strong>: <em>Check</em></li>
                        <li>Privacy ‚Üí Screen Lock ‚Üí <strong>Automatic Screen Lock</strong>: <em>Uncheck</em></li>
                        <li>Privacy ‚Üí Screen Lock ‚Üí <strong>Lock Screen on Suspend</strong>: <em>Uncheck</em></li>
                        <li>Privacy ‚Üí Screen Lock ‚Üí <strong>Show Notification on Lock Screen</strong>: <em>Uncheck</em></li>
                        <li>Privacy ‚Üí Screen Lock ‚Üí <strong>Blank Screen Delay</strong>: <em>Never</em></li>
                        <li>Privacy ‚Üí Diagnostics ‚Üí <strong>Send error reports to Canonical</strong>: <em>Never</em></li>
                        <li>Sound ‚Üí <strong>System Volume</strong>: <em>0</em></li>
                        <li>
                          <table>
                            <tbody>
                              <tr>
                                <td>Sound ‚Üí Input</td>
                                <td><strong>Volume</strong>: <em>0</em></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>
                          <table>
                            <tbody>
                              <tr>
                                <td>Power ‚Üí Power Saving</td>
                                <td><strong>Blank Screen</strong>: <em>Never</em></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>
                          <table>
                            <tbody>
                              <tr>
                                <td>Power ‚Üí Suspend &amp; Power Button</td>
                                <td><strong>Automatic Suspend</strong>: <em>Off</em></td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                      </ul>
                    </li>
                    <li>Automatisk innlogging: <code class="highlighter-rouge">sudo vim /etc/lightdm/lightdm.conf</code>¬†
                      <div class="language-bash highlighter-rouge">
                        <div class="highlight">
                          <pre class="highlight"><code>  <span class="o">[</span>SeatDefaults]
  autologin-user<span class="o">=</span>kiosk
  autologin-user-timeout<span class="o">=</span>0
  user-session<span class="o">=</span>ubuntu
  greeter-session<span class="o">=</span>unity-greeter
</code></pre>
                        </div>
                            </div>
                    </li>
                    <li><code class="highlighter-rouge">sudo vim /etc/lightdm/lightdm.conf.d/50-myconfig.conf</code>
                      <div class="language-bash highlighter-rouge">
                        <div class="highlight">
                          <pre class="highlight"><code>  <span class="o">[</span>SeatDefaults]
  autologin-user<span class="o">=</span>kiosk
</code></pre>
                        </div>
                            </div>
                    </li>
                    <li>Sett opp autostart av kiosk-script: <code class="highlighter-rouge">mkdir /home/kiosk/.config/autostart</code>¬†</li>
                    <li><code class="highlighter-rouge">vim /home/kiosk/.config/autostart/kiosk.desktop</code>¬†
                      <div class="language-bash highlighter-rouge">
                        <div class="highlight">
                          <pre class="highlight"><code>  <span class="o">[</span>Desktop Entry]
  <span class="nv">Type</span><span class="o">=</span>Application
  <span class="nv">Name</span><span class="o">=</span>Kiosk
  <span class="nv">Exec</span><span class="o">=</span>/home/kiosk/kiosk.sh
  X-GNOME-Autostart-enabled<span class="o">=</span><span class="nb">true</span>
</code></pre>
                        </div>
                            </div>
                    </li>
                    <li><code class="highlighter-rouge">vim /home/kiosk/kiosk.sh</code>¬†
                      <div class="language-bash highlighter-rouge">
                        <div class="highlight">
                          <pre class="highlight"><code>  <span class="c">#!/bin/bash</span>
  <span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:0
    
  <span class="c"># Hide the mouse from the display</span>
  unclutter &amp;
    
  <span class="c"># Start x11vnc</span>
  /usr/bin/x11vnc <span class="nt">-create</span> <span class="nt">-xkb</span> <span class="nt">-noxrecord</span> <span class="nt">-noxfixes</span> <span class="nt">-display</span> :0 <span class="nt">-auth</span> /var/run/lightdm/root/:0 <span class="nt">-rfbauth</span> /home/kiosk/.x11vnc.pass <span class="nt">-forever</span> <span class="nt">-rfbport</span> 5905 &amp;
</code></pre>
                        </div>
                            </div>
                    </li>
                    <li><code class="highlighter-rouge">chmod +x /home/kiosk/kiosk.sh</code></li>
                    <li><code class="highlighter-rouge">‚éµx11vnc -storepasswd passwordgoeshere /home/kiosk/.x11vnc.pass</code></li>
                    <li>For Firefox:
                      <ul>
                        <li><code class="highlighter-rouge">sudo apt-get install -y firefox</code>
                          <code class="highlighter-rouge">sudo apt-mark hold firefox</code></li>
                        <li>Settings:
                          <ul>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>General &gt; Startup</td>
                                    <td><em>Make Default‚Ä¶</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>General &gt; Language</td>
                                    <td><strong>Check your spelling as you type</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>General &gt; Browsing</td>
                                    <td><strong>Enable picture-in-picture video controls</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>General &gt; Browsing</td>
                                    <td><strong>Recommend extensions as you browse</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>General &gt; Browsing</td>
                                    <td><strong>Recommend features as you browse</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>Home &gt; New Windows and Tabs</td>
                                    <td><strong>Homepage and new windows</strong>: <em>Blank Page</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>Home &gt; New Windows and Tabs</td>
                                    <td><strong>New tabs</strong>: <em>Blank Page</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>Privacy &amp; Security &gt; Logins and Passwords</td>
                                    <td><strong>Ask to save logins and passwords for websites</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>
                              <table>
                                <tbody>
                                  <tr>
                                    <td>Privacy &amp; Security &gt; Logins and Passwords</td>
                                    <td><strong>Show alerts about passwords for breached websites</strong>: <em>Uncheck</em></td>
                                  </tr>
                                </tbody>
                              </table>
                            </li>
                            <li>Privacy &amp; Security &gt; Firefox Data Collection and Use &gt; <strong>Allow Firefox to send technical and interaction data to Mozilla</strong>: <em>Uncheck</em></li>
                            <li>Privacy &amp; Security &gt; Firefox Data Collection and Use &gt; <strong>Allow Firefox to make personalized extension recommendations</strong>: <em>Uncheck</em></li>
                            <li>Privacy &amp; Security &gt; Firefox Data Collection and Use &gt; <strong>Allow Firefox to install and run studies</strong>: <em>Uncheck</em></li>
                          </ul>
                        </li>
                        <li><code class="highlighter-rouge">about:config</code>¬†
                          <ul>
                            <li><code class="highlighter-rouge">gfx.webrender.all</code>: <code class="highlighter-rouge">true</code>¬†</li>
                            <li><code class="highlighter-rouge">layers.acceleration.force-enabled</code>: <code class="highlighter-rouge">true</code>¬†</li>
                            <li><code class="highlighter-rouge">browser.tabs.warnOnClose</code>: <code class="highlighter-rouge">false</code></li>
                            <li><code class="highlighter-rouge">browser.tabs.warnOnCloseOtherTabs</code>: <code class="highlighter-rouge">false</code></li>
                            <li><code class="highlighter-rouge">browser.send_pings</code>: <code class="highlighter-rouge">false</code>¬†</li>
                            <li><code class="highlighter-rouge">beacon.enabled</code>: <code class="highlighter-rouge">false</code>¬†</li>
                            <li><code class="highlighter-rouge">alerts.useSystemBackend</code>: <code class="highlighter-rouge">true</code>¬†</li>
                            <li><code class="highlighter-rouge">extensions.pocket.enabled</code>: <code class="highlighter-rouge">false</code>¬†</li>
                            <li><code class="highlighter-rouge">browser.sessionstore.resume_from_crash: false</code>¬†</li>
                            <li><code class="highlighter-rouge">toolkit.startup.max_resumed_crashes: -1</code></li>
                            <li><code class="highlighter-rouge">browser.sessionstore.max_resumed_crashes: -1</code></li>
                            <li><code class="highlighter-rouge">browser.disableResetPrompt: true</code>¬†</li>
                          </ul>
                        </li>
                        <li>Legg til nederst i <code class="highlighter-rouge">/home/kiosk/kiosk.sh</code>
                          <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                              <pre class="highlight"><code>  <span class="c"># Run Firefox in kiosk-mode</span>
  /usr/bin/firefox <span class="nt">--kiosk</span> <span class="nt">--private</span> <span class="nt">--new-window</span> https://duck.com &amp;
</code></pre>
                            </div>
                                    </div>
                        </li>
                      </ul>
                    </li>
                    <li>For Chromium:
                      <ul>
                        <li><code class="highlighter-rouge">sudo apt-get install -y chromium-browser</code></li>
                        <li>Settings:
                          <ul>
                            <li>Autofill ‚Üí Passwords ‚Üí <strong>Offer to save passwords</strong>: <em>Uncheck</em></li>
                            <li>Autofill ‚Üí Passwords ‚Üí <strong>Auto Sign-in</strong>: <em>Uncheck</em></li>
                            <li>Autofill ‚Üí Payment methods ‚Üí <strong>Save and fill payment methods</strong>: <em>Uncheck</em></li>
                            <li>Autofill ‚Üí Payment methods ‚Üí <strong>Allow sites to check if you have payment methods saved</strong>: <em>Uncheck</em></li>
                            <li>Autofill ‚Üí Addresses and more ‚Üí <strong>Save and fill addresses</strong>: <em>Uncheck</em></li>
                            <li>Advanced ‚Üí Languages ‚Üí <strong>Spell check</strong>: <em>Uncheck</em></li>
                            <li>Advanced ‚Üí Languages ‚Üí Language ‚Üí <strong>Offer to translate pages that aren‚Äôt in a language you read</strong>: <em>Unchecked</em></li>
                            <li>Gj√∏r Chromium til default nettleser: Default Browser ‚Üí <em>Make Default</em></li>
                          </ul>
                        </li>
                        <li>Legg til nederst i <code class="highlighter-rouge">/home/kiosk/kiosk.sh</code>
                          <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                              <pre class="highlight"><code>  <span class="c"># Clear crash-flags if Chromium crashed to avoid warning banners</span>
  <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/"exited_cleanly":false/"exited_cleanly":true/'</span> /home/kiosk/.config/chromium/Default/Preferences
  <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/"exit_type":"Crashed"/"exit_type":"Normal"/'</span> /home/kiosk/.config/chromium/Default/Preferences

  <span class="c"># Run Chromium in kiosk-mode</span>
  /usr/bin/chromium-browser <span class="nt">--kiosk</span> https://duck.com &amp;
</code></pre>
                            </div>
                                    </div>
                        </li>
                      </ul>
                    </li>
                    <li>Fjern Gnome Keyring passord (forskjellig fra login passord)
                      <ol>
                        <li>√Öpne <em>Passwords and Keys</em></li>
                        <li>
                          <table>
                            <tbody>
                              <tr>
                                <td>H√∏yreklikk p√• Passwords ‚Üí Passwords</td>
                                <td>Login ‚Üí <em>Change Password</em>¬†</td>
                              </tr>
                            </tbody>
                          </table>
                        </li>
                        <li>Skriv inn det eksisterende passordet og sett et nytt blankt passord</li>
                      </ol>
                    </li>
                    <li><code class="highlighter-rouge">reboot</code>¬†
                      <ul>
                        <li>N√•r maskinen f√•r startet igjen skal nettleseren v√¶re den eneste synlige applikasjonen.</li>
                        <li>Om du trenger √• g√• ut av kiosk-modus kan du klikke super-knappen eller drepe nettleseren fra en terminal fra en annen TTY.</li>
                      </ul>
                    </li>
                  </ul>
                  <h2 id="automatisk-reloading-av-nettside">Automatisk reloading av nettside</h2>
                  <p>Det finnes flere extensions p√• Firefox/Chrome web storene som lar deg automatisk reloade en nettside basert p√• et gitt intervall, men de ser litt sketchy ut, og det lar seg lett gj√∏re med <code class="highlighter-rouge">cron</code> og <code class="highlighter-rouge">xdotool</code>.</p>
                  <ol>
                    <li><code class="highlighter-rouge">sudo apt-get install -y xdotool</code>¬†</li>
                    <li>Bruk <code class="highlighter-rouge">xprop | grep 'WM_CLASS(STRING)' | awk '{print $3 $4}'</code> og klikk p√• et vindu for √• finne klassen til det, det som er listet som den andre verdien til <code class="highlighter-rouge">WM_CLASS(STRING)</code> er som regel den du er ute etter.</li>
                    <li><code class="highlighter-rouge">crontab -e</code>¬†(endre <em>firefox</em> til den relevante applikasjonen)
                      <div class="language-bash highlighter-rouge">
                        <div class="highlight">
                          <pre class="highlight"><code> 0 <span class="k">*</span>/2 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="o">(</span> <span class="nv">DISPLAY</span><span class="o">=</span>:0 xdotool search <span class="nt">--onlyvisible</span> <span class="nt">--class</span> firefox windowactivate <span class="nt">--sync</span> <span class="se">\%</span>@ key ctrl+F5 <span class="o">)</span>
</code></pre>
                        </div>
                            </div>
                    </li>
                  </ol>
                  <h2 id="automatisk-oppdatering">Automatisk oppdatering</h2>
                  <div class="language-bash highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code><span class="c"># Mulig du m√• installere pakken unattended-upgrades om den ikke er installert allerede</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> unattended-upgrades

<span class="nb">sudo </span>vim /etc/apt/apt.conf.d/50unattended-upgrades

<span class="c"># Kommenter inn og endre disse linjene</span>
<span class="s2">"</span><span class="k">${</span><span class="nv">distro_id</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">distro_codename</span><span class="k">}</span><span class="s2">-updates"</span><span class="p">;</span>
Unattended-Upgrade::MinimalSteps <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Remove-Unused-Kernel-Packages <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Remove-Unused-Dependencies <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Automatic-Reboot <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Automatic-Reboot-Withusers <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Automatic-Reboot-Time <span class="s2">"02:00"</span><span class="p">;</span>

<span class="c"># Om du bruker Firefox, kommenter ogs√• inn disse linjene ‚Äî</span>
<span class="c"># Firefox krever en omstart etter oppdatering,</span>
<span class="c"># antar at cron-jobben som kj√∏rer Shift+F5 f√•r dette til √• stoppe.</span>
<span class="c"># Dette blir fors√•vidt omg√•tt med √• locke firefox-pakken, men...</span>
Unattended-Upgrade::InstallOnShutdown <span class="s2">"true"</span><span class="p">;</span>
<span class="c"># Og gi den lengere tid p√• √• oppdatere under shutdown</span>
<span class="nb">sudo </span>vim /etc/systemd/logind.conf
<span class="c"># Kommenter inn / endre</span>
<span class="nv">InhibitDelayMaxSec</span><span class="o">=</span>1800

<span class="c"># Om det er en laptop, kommenter ogs√• inn i logind.conf</span>
<span class="nv">HandleLidSwitch</span><span class="o">=</span>ignore

<span class="nb">sudo </span>vim /etc/apt/apt.conf.d/20auto-upgrades

<span class="c"># Kommenter inn disse linjene</span>
APT::Periodic::Update-Package-Lists <span class="s2">"1"</span><span class="p">;</span>
APT::Periodic::Download-Upgradeable-Packages <span class="s2">"1"</span><span class="p">;</span>
APT::Periodic::AutocleanInterval <span class="s2">"7"</span><span class="p">;</span>
APT::Periodic::Unattended-Upgrade <span class="s2">"1"</span><span class="p">;</span>

<span class="c"># Sjekk at det funker</span>
<span class="nb">sudo </span>unattended-upgrades <span class="nt">--dry-run</span> <span class="nt">--debug</span>
<span class="c"># Sjekk om det har kj√∏rt:</span>
<span class="nb">tail</span> <span class="nt">-f</span> /var/log/unattended-upgrades/unattended-upgrades.log
/var/log/dpkg.log
/var/log/apt/history.log
/etc/cron.daily/apt
/etc/cron.daily/<span class="k">*</span>
/etc/crontab
</code></pre>
                    </div>
                  </div>
                  <h2 id="dim-skjerm-p√•-tidsintervall">Dim skjerm p√• tidsintervall</h2>
                  <div class="language-bash highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code>crontab <span class="nt">-e</span>

<span class="c"># Dim skjermen kl. 17:00 hver dag, u-dim den kl. 07:00 hver hverdag</span>
0 17 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="o">(</span> <span class="nv">DISPLAY</span><span class="o">=</span>:0 xrandr <span class="nt">--output</span> <span class="s2">"</span><span class="si">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0 xrandr <span class="nt">-q</span> | <span class="nb">grep</span> <span class="s1">' connected'</span> | <span class="nb">head</span> <span class="nt">-1</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span><span class="s2">"</span> <span class="nt">--brightness</span> 0.2 <span class="o">)</span>
0 7 <span class="k">*</span> <span class="k">*</span> 1-5 <span class="o">(</span> <span class="nv">DISPLAY</span><span class="o">=</span>:0 xrandr <span class="nt">--output</span> <span class="s2">"</span><span class="si">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0 xrandr <span class="nt">-q</span> | <span class="nb">grep</span> <span class="s1">' connected'</span> | <span class="nb">head</span> <span class="nt">-1</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span><span class="s2">"</span> <span class="nt">--brightness</span> 1 <span class="o">)</span>
</code></pre>
                    </div>
                  </div>
                </div>
                <!-- Add backlinks to the current page --></div>
              <div id="copyright">
                <p>
                  <a href="https://github.com/runarsf"><b>Runar Fredagsvik</b></a>
                </p>
              </p>
              <p>Except where otherwise <a class='waves' href="https://creativecommons.org/policies#license">noted</a>, content on this site is licensed under a <a class='waves' href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
            </div>
            <script src="/assets/js/modeswitcher.js"></script></main>
        </div>
        <button onclick="scrollToTop()" id="scrollToTop" title="Go to top"></button>
        <style>
          #scrollToTop {
              display: none; /* Hidden by default */
              position: fixed; /* Fixed/sticky position */
              bottom: 20px; /* Place the button at the bottom of the page */
              right: 20px; /* Place the button 30px from the right */
              z-index: 99; /* Make sure it does not overlap */
              border: none; /* Remove borders */
              outline: none; /* Remove outline */
              background-color: var(--bg-main); /* Set a background color */
              color: var(--text-main); /* Text color */
              cursor: pointer; /* Add a mouse pointer on hover */
              padding: 15px; /* Some padding */
              border-radius: 50%; /* Rounded corners */
              font-size: 18px; /* Increase font size */
              position: fixed;
          
              width: 40px;
              height: 40px;
              background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNzUxLDQ1NS44NjhjLTIwLjE4MSwyMC4xNzktNTMuMTY1LDE5LjkxMy03My42NzMtMC41OTVsMCwwYy0yMC41MDgtMjAuNTA4LTIwLjc3My01My40OTMtMC41OTQtNzMuNjcyICBsMTg5Ljk5OS0xOTBjMjAuMTc4LTIwLjE3OCw1My4xNjQtMTkuOTEzLDczLjY3MiwwLjU5NWwwLDBjMjAuNTA4LDIwLjUwOSwyMC43NzIsNTMuNDkyLDAuNTk1LDczLjY3MUwyOTMuNzUxLDQ1NS44Njh6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjIwLjI0OSw0NTUuODY4YzIwLjE4LDIwLjE3OSw1My4xNjQsMTkuOTEzLDczLjY3Mi0wLjU5NWwwLDBjMjAuNTA5LTIwLjUwOCwyMC43NzQtNTMuNDkzLDAuNTk2LTczLjY3MiAgbC0xOTAtMTkwYy0yMC4xNzgtMjAuMTc4LTUzLjE2NC0xOS45MTMtNzMuNjcxLDAuNTk1bDAsMGMtMjAuNTA4LDIwLjUwOS0yMC43NzIsNTMuNDkyLTAuNTk1LDczLjY3MUwyMjAuMjQ5LDQ1NS44Njh6Ii8+DQo8L3N2Zz4=);
              background-size: 35%;
              background-repeat: no-repeat;
              background-position: center;
              transform: rotate(180deg); /* Hack to flip button upside down */
          }
          
          #scrollToTop:hover {
              background-color: var(--border);
          }
          #scrollToTop:active {
              filter: brightness(75%);
          }
        </style>
        <script>
          scrollToTopButton = document.getElementById("scrollToTop");
          
          window.onscroll = function () { scrollViewFunction() };
          
          function scrollViewFunction() {
              if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
                  scrollToTopButton.style.display = "block";
              } else {
                  scrollToTopButton.style.display = "none";
              }
          }
          
          function scrollToTop() {
              document.body.scrollTop = 0; // For Safari
              document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
          }
        </script><!--- CASE 3 : Static Page --><!--- CASE 4 : Blog Listing page --><!--- CASE 5 :  Notes Listing page --></div>
    </section>
  </body>
</html>